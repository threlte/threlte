---
order: 5.1
category: '@threlte/extras'
sourcePath: 'packages/extras/src/lib/components/SpriteSheetMaterial/SpriteSheetMaterial.svelte'
name: <SpriteSheetMaterial>
type: 'component'
componentSignature:
  {
    props:
      [
        {
          name: 'textureUrl',
          type: 'string',
          required: true,
          description: 'The URL of the spritesheet texture image.'
        },
        {
          name: 'dataUrl',
          type: 'string',
          required: false,
          description: 'The URL of the spritesheet JSON.'
        },
        {
          name: 'animation',
          type: 'string',
          required: false,
          description: 'The current playing animation name.'
        },
        {
          name: 'loop',
          type: 'boolean',
          required: false,
          default: 'true',
          description: 'Whether or not the current animation should loop.'
        },
        {
          name: 'autoplay',
          type: 'boolean',
          required: false,
          default: 'true',
          description: 'Controls whether or not to automatically run an animation on load.'
        },
        {
          name: 'fps',
          type: 'boolean',
          required: false,
          default: '10',
          description: 'The desired frames per second of the animation.'
        },
        {
          name: 'filter',
          type: '"nearest" | "linear"',
          required: false,
          default: '"nearest"',
          description: 'The texture filtering applied to the spritesheet.'
        },
        {
          name: 'alphaTest',
          type: 'number',
          required: false,
          default: '0.1',
          description: 'Sets the alpha value to be used when running an alpha test.'
        },
        {
          name: 'delay',
          type: 'number',
          required: false,
          default: '0',
          description: 'Delay the start of the animation in ms.'
        },
        {
          name: 'transparent',
          type: 'boolean',
          required: false,
          default: 'true',
          description: 'Whether or not the material should be transparent.'
        },
        {
          name: 'flipX',
          type: 'boolean',
          required: false,
          default: 'false',
          description: 'Whether or not the Sprite should flip sides on the x-axis.'
        },

        {
          name: 'totalFrames',
          type: 'number',
          required: false,
          default: 'rows * columns - 1',
          description: 'The total number of frames in the spritesheet.'
        },
        {
          name: 'startFrame',
          type: 'number',
          required: false,
          default: '0',
          description: 'The start frame of the current animation.'
        },
        {
          name: 'endFrame',
          type: 'number',
          required: false,
          default: 'totalFrames',
          description: 'The end frame of the current animation.'
        },
        {
          name: 'rows',
          type: 'number',
          required: false,
          default: '1',
          description: 'The number of rows in the spritesheet.'
        },
        {
          name: 'columns',
          type: 'number',
          required: false,
          description: 'The number of columns in the spritesheet.'
        }
      ],
    events:
      [
        { name: 'load', payload: 'void', description: 'Fires when all resources have loaded.' },
        { name: 'start', payload: 'void', description: 'Fires when an animation starts.' },
        { name: 'end', payload: 'void', description: 'Fires when an animation ends.' },
        { name: 'loop', payload: 'void', description: 'Fires when an animation loop completes.' }
      ],
    exports: [{ name: play, type: '() => void' }, { name: pause, type: '() => void' }]
  }
---

A common pattern with 2D assets is to pack sprites into one texture called a
spritesheet. This can be used for both static and animatable sprites.

## Basics

A `Sprite` is a plane that always faces the camera and cannot cast
shadows. The `SpriteMaterial` is transparent by default and isn't affected by
lighting. This can be a drawback sometimes so using a normal `Mesh`,
`PlaneGeometry` and `MeshStandardMaterial` is a valid option.

<Example path="extras/sprites/basic-mesh" />

By default, if the `<SpriteSheetMaterial/>` has a `Mesh` parent it'll be a `MeshStandardMaterial`,
otherwise its assumed to be a child of a `Sprite` and be a `SpriteMaterial` instead. A custom depth
material will be added when it's parent is a mesh to support shadows.

Any other material type can be used as well.

```svelte {2}+
<SpriteSheetMaterial
  is={THREE.MeshToonMaterial}
  textureUrl="fire.png"
/>
```

It's assumed that the spritesheet's texture will be used again elsewhere within
your app. This would normally cause problems however `<SpriteSheetMaterial>`
[clones](https://threejs.org/docs/index.html?q=text#api/en/textures/Texture.clone)
the texture and then disposes the clone when destroyed.

## SpriteSheets

The data for the spritesheet texture can be created from props, given in the `data`
prop or loaded from file using the `dataURL` prop. If the component isn't given
enough information from props, it'll either display the entire spritesheet or
the first sprite frame.

### Multiple Sprites

The simplest setup is to pack your sprites into a single row or uniform grid and provide the
the number of `columns` and/or `rows`. Then use `select` to pick the index of the sprite to use.

```svelte {3-5}+
<SpriteSheetMaterial
  textureUrl="fruit.png"
  columns={4}
  rows={4}
  select={10}
/>
```

If your texture has some sprites of different sizes or you want to only single
out a couple of sprites from your texture, you'll need to provide that
information into the `data` prop. `select` can be the name of the sprite.

```svelte {34-35}+
<script lang="ts">
  import { T } from '@threlte/core'
  import { SpriteSheetMaterial, type SpriteSheetData } from '@threlte/extras'

  const data = {
    frames: [
      {
        x: 0,
        y: 48,
        width: 16,
        height: 16,
        name: 'apple_red'
      },
      {
        x: 16,
        y: 16,
        width: 16,
        height: 16,
        name: 'bush'
      },
      {
        x: 32,
        y: 0,
        width: 16,
        height: 48,
        name: 'tree'
      }
    ]
  } satisfies SpriteSheetData
</script>

<SpriteSheetMaterial
  textureUrl="worldtileset.png"
  {data}
  select={'tree'}
/>
```

### Animated Sprites

<Example path="extras/sprites/animated-sprite-sheet-material" />

If your spritesheet is meant to be animated, it needs to have the `animate`
prop.

If no `data` or `dataURL` props are provided, additional props must be passed
to create and run the animation.

- `totalFrames` or `columns` if the spritesheet is only a single row.
- `rows` and `columns` otherwise.

```svelte {3-4}+
<SpriteSheetMaterial
  textureUrl="coin.png"
  totalFrames={12}
  animate
/>
```

Additionally, if a sheet with no JSON supplied has multiple animations, start
and end frames must be passed to run an animation within the sheet.

```svelte {7-8}+
<T.Sprite>
  <SpriteSheetMaterial
    textureUrl="./fire.png"
    totalFrames={14}
    rows={4}
    columns={4}
    startFrame={4}
    endFrame={8}
  />
</T.Sprite>
```

## typescript

`enum`s and `satisfies`

## Supported data formats

Your JSON metadata may have been created from a third-party program, in which
case if it's supported it will be transformed into the format that threlte uses.

The following are currently supported:

- [Aseprite](https://www.aseprite.org/).
