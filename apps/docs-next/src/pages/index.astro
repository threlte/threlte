---
import MainLayout from '../layouts/MainLayout.astro'
// import { Image } from '@astrojs/image/components'
// import MainImage from '$assets/main.png'
import IntroExample from '$components/Intro/IntroExample.svelte'
import FeatureSection from '$components/Sections/FeatureSection.astro'
import Code from '$components/Code/Code.astro'

// examples
import IntroExampleRaw from '$components/Intro/IntroExampleCodePanel.txt?raw'
import ScaleExampleRaw from '$components/Intro/ScaleExample.txt?raw'
import RapierExampleRaw from '$components/Intro/RapierExample.txt?raw'
import ExtrasExampleRaw from '$components/Intro/ExtrasExample.txt?raw'
import PreprocessBeforeExampleRaw from '$components/Intro/PreprocessBeforeExample.txt?raw'
import PreprocessAfterExampleRaw from '$components/Intro/PreprocessAfterExample.txt?raw'

import Button from '$components/Button/Button.astro'
import Testimonials from '$components/Testimonials/Testimonials.astro'
---

<MainLayout title="Welcome to Threlte.">
  <div class="flex flex-col gap-14 py-24">
    <div class="flex flex-row justify-center">
      <h2 class="text-6xl font-bold text-center text-glow-white">
        Rapidly build interactive<br />
        <span class="inline-block border-b-[12px] border-orange">3D apps</span> for the web.
      </h2>
    </div>

    <div class="flex flex-col gap-4 items-center">
      <div class="text-2xl text-faded flex-1 text-center font-light">
        A 3D framework for the web.<br />
        Built on top of
        <span class="text-orange font-bold">Svelte</span>
        and
        <span class="text-orange font-bold">Three.js</span>.
      </div>

      <div
        class="flex flex-row gap-4 items-center justify-center bg-white/5 border border-white/20 shadow-xl rounded-full py-2 px-2"
      >
        <!-- Svelte Logo -->
        <div class="w-14 h-14 bg-white rounded-full flex items-center justify-center">
          <svg
            class="w-[55%]"
            version="1.1"
            id="Layer_1"
            xmlns="http://www.w3.org/2000/svg"
            xmlns:xlink="http://www.w3.org/1999/xlink"
            x="0px"
            y="0px"
            viewBox="0 0 98.1 118"
            style="enable-background:new 0 0 98.1 118;"
            xml:space="preserve"
          >
            <style type="text/css">
              .st0 {
                fill: #ff3e00;
              }
              .st1 {
                fill: #ffffff;
              }
            </style>
            <path
              class="st0"
              d="M91.8,15.6C80.9-0.1,59.2-4.7,43.6,5.2L16.1,22.8C8.6,27.5,3.4,35.2,1.9,43.9c-1.3,7.3-0.2,14.8,3.3,21.3
c-2.4,3.6-4,7.6-4.7,11.8c-1.6,8.9,0.5,18.1,5.7,25.4c11,15.7,32.6,20.3,48.2,10.4l27.5-17.5c7.5-4.7,12.7-12.4,14.2-21.1
c1.3-7.3,0.2-14.8-3.3-21.3c2.4-3.6,4-7.6,4.7-11.8C99.2,32.1,97.1,22.9,91.8,15.6"
            ></path>
            <path
              class="st1"
              d="M40.9,103.9c-8.9,2.3-18.2-1.2-23.4-8.7c-3.2-4.4-4.4-9.9-3.5-15.3c0.2-0.9,0.4-1.7,0.6-2.6l0.5-1.6l1.4,1
c3.3,2.4,6.9,4.2,10.8,5.4l1,0.3l-0.1,1c-0.1,1.4,0.3,2.9,1.1,4.1c1.6,2.3,4.4,3.4,7.1,2.7c0.6-0.2,1.2-0.4,1.7-0.7L65.5,72
c1.4-0.9,2.3-2.2,2.6-3.8c0.3-1.6-0.1-3.3-1-4.6c-1.6-2.3-4.4-3.3-7.1-2.6c-0.6,0.2-1.2,0.4-1.7,0.7l-10.5,6.7
c-1.7,1.1-3.6,1.9-5.6,2.4c-8.9,2.3-18.2-1.2-23.4-8.7c-3.1-4.4-4.4-9.9-3.4-15.3c0.9-5.2,4.1-9.9,8.6-12.7l27.5-17.5
c1.7-1.1,3.6-1.9,5.6-2.5c8.9-2.3,18.2,1.2,23.4,8.7c3.2,4.4,4.4,9.9,3.5,15.3c-0.2,0.9-0.4,1.7-0.7,2.6l-0.5,1.6l-1.4-1
c-3.3-2.4-6.9-4.2-10.8-5.4l-1-0.3l0.1-1c0.1-1.4-0.3-2.9-1.1-4.1c-1.6-2.3-4.4-3.3-7.1-2.6c-0.6,0.2-1.2,0.4-1.7,0.7L32.4,46.1
c-1.4,0.9-2.3,2.2-2.6,3.8s0.1,3.3,1,4.6c1.6,2.3,4.4,3.3,7.1,2.6c0.6-0.2,1.2-0.4,1.7-0.7l10.5-6.7c1.7-1.1,3.6-1.9,5.6-2.5
c8.9-2.3,18.2,1.2,23.4,8.7c3.2,4.4,4.4,9.9,3.5,15.3c-0.9,5.2-4.1,9.9-8.6,12.7l-27.5,17.5C44.8,102.5,42.9,103.3,40.9,103.9"
            ></path>
          </svg>
        </div>

        <!-- Three.js Logo -->
        <div class="w-14 h-14 bg-white rounded-full flex items-center justify-center">
          <svg
            class="w-[75%] translate-x-[5%]"
            fill="none"
            stroke-linecap="square"
            stroke-miterlimit="10"
            version="1.1"
            viewBox="0 0 226.77 226.77"
            xmlns="http://www.w3.org/2000/svg"
          >
            <g
              transform="translate(8.964 4.2527)"
              fill-rule="evenodd"
              stroke="#000"
              stroke-linecap="butt"
              stroke-linejoin="round"
              stroke-width="4"
            >
              <path d="m63.02 200.61-43.213-174.94 173.23 49.874z"></path>
              <path d="m106.39 50.612 21.591 87.496-86.567-24.945z"></path>
              <path d="m84.91 125.03-10.724-43.465 43.008 12.346z"></path>
              <path d="m63.458 38.153 10.724 43.465-43.008-12.346z"></path>
              <path d="m149.47 62.93 10.724 43.465-43.008-12.346z"></path>
              <path d="m84.915 125.06 10.724 43.465-43.008-12.346z"></path>
            </g>
          </svg>
        </div>
      </div>
    </div>

    <div class="flex flex-col-reverse items-center md:flex-row justify-center gap-6 md:gap-3">
      <code class="px-7 py-4 text-[1em]">
        <span class="mr-2 text-orange font-bold select-none">{'>'}</span>npm i @threlte/core
      </code>
      <Button
        href="/docs/learn/getting-started"
        color="orange"
        class="glow-orange"
      >
        Get Started
        <Fragment slot="icon-after">→</Fragment>
      </Button>
    </div>

    <div class="flex flex-row justify-center items-start gap-8 md:my-12">
      <div class="flex flex-col gap-8 w-1/3">
        <div class="text-xl text-faded">
          Write clear, <span class="text-highlight">declarative</span> and
          <span class="text-highlight">type-safe</span> components that seemlessly react to state changes
          and are ready to be <span class="text-highlight">interactive</span>.
        </div>

        <div class="z-10">
          <Code
            class="h-[600px] w-[calc(100%+150px)] overflow-auto"
            code={IntroExampleRaw}
            lang="svelte"
          />
        </div>
      </div>

      <div
        class="bg-white/5 border border-white/20 shadow-xl overflow-hidden rounded-md w-2/3 aspect-[4/3]"
      >
        <IntroExample
          class="w-full h-full"
          client:load
        />
      </div>
    </div>
  </div>

  <!-- Declarative Scaling -->
  <FeatureSection color="blue">
    <svg
      slot="icon"
      viewBox="0 0 33 33"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        opacity="0.4"
        d="M27.4886 5.80411H20.4886V26.8041H27.4886V5.80411Z"
        fill="white"
      ></path>
      <path
        d="M29.4886 26.8041H4.48856"
        stroke="white"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
      ></path>
      <path
        d="M13.4886 26.8041V11.8041H20.4886"
        stroke="white"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
      ></path>
      <path
        d="M27.4886 5.80411H20.4886V26.8041H27.4886V5.80411Z"
        stroke="white"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
      ></path>
      <path
        d="M6.48856 26.8041V17.8041H13.4886"
        stroke="white"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
      ></path>
    </svg>

    <Fragment slot="subline">Declarative Components</Fragment>

    <Fragment slot="headline">Scale with ease.</Fragment>

    <Fragment slot="body-left">
      Threlte lets you use every feature of Three.js in a declarative way. Compose your scene with
      Threlte's <span class="text-highlight">render components</span> and let Threlte handle the rest.<br
      />

      Leverage the <span class="text-highlight">lifecycle</span> of Svelte components to subscribe to
      events, handle state changes and more.

      <Button
        class="mt-8"
        href=""
        color="blue"
      >
        Learn More
      </Button>
    </Fragment>

    <Fragment slot="body-right">
      <Code
        code={ScaleExampleRaw}
        lang="svelte"
      />
    </Fragment>
  </FeatureSection>

  <!-- Features, Ecosystem -->
  <FeatureSection class="border-t-0">
    <svg
      slot="icon"
      viewBox="0 0 33 33"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        opacity="0.2"
        d="M27.9886 23.8041V9.80411C27.9886 8.69954 27.0931 7.80411 25.9886 7.80411L6.98856 7.80411C5.88399 7.80411 4.98856 8.69954 4.98856 9.80411V23.8041C4.98856 24.9087 5.88399 25.8041 6.98856 25.8041H25.9886C27.0931 25.8041 27.9886 24.9087 27.9886 23.8041Z"
        fill="white"
      ></path>
      <path
        d="M31.9886 12.8041V20.8041"
        stroke="white"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
      ></path>
      <path
        d="M27.9886 23.8041V9.80411C27.9886 8.69954 27.0931 7.80411 25.9886 7.80411L6.98856 7.80411C5.88399 7.80411 4.98856 8.69954 4.98856 9.80411V23.8041C4.98856 24.9087 5.88399 25.8041 6.98856 25.8041H25.9886C27.0931 25.8041 27.9886 24.9087 27.9886 23.8041Z"
        stroke="white"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
      ></path>
      <path
        d="M16.4886 21.8041L18.4886 16.8041H14.4886L16.4886 11.8041"
        stroke="white"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
      ></path>
    </svg>

    <Fragment slot="subline">Community driven</Fragment>

    <Fragment slot="headline">Batteries included.</Fragment>

    <Fragment slot="body-left">
      Threlte comes with integrations for <a
        class="text-highlight"
        href="https://rapier.rs/"
        >Rapier</a
      >, a best-in-class physics engine, <a
        class="text-highlight"
        href="https://www.theatrejs.com/"
        >Theatre.js</a
      >, an animation library with a professional motion design toolset and <code
        >@threlte/gltf</code
      >, a tool to transform GLTF files into Threlte components.<br /><br />

      On top of that <code>@threlte/extras</code> provides a collection of useful components and utilities
      to get you started.

      <Button
        class="mt-8"
        href=""
        color="orange"
      >
        Documentation
      </Button>
    </Fragment>

    <Fragment slot="body-right">
      <div class="flex flex-col gap-6">
        <div>
          <Code
            title="@threlte/rapier"
            code={RapierExampleRaw}
            lang="svelte"
          />
        </div>

        <div>
          <Code
            title="@threlte/extras"
            code={ExtrasExampleRaw}
            lang="svelte"
          />
        </div>
      </div>
    </Fragment>
  </FeatureSection>

  <!-- Rendering -->
  <FeatureSection
    color="green"
    class="border-t-0"
  >
    <svg
      slot="icon"
      viewBox="0 0 33 33"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        opacity="0.2"
        d="M8.98856 27.8041C8.72335 27.8041 8.46899 27.6987 8.28146 27.5112C8.09392 27.3237 7.98856 27.0693 7.98856 26.8041V21.4666C7.43995 21.7283 6.83194 21.8404 6.22607 21.7916C5.71306 21.7539 5.21466 21.6036 4.76635 21.3514C4.31805 21.0992 3.93084 20.7512 3.6323 20.3323C3.33377 19.9134 3.13123 19.4339 3.03911 18.9278C2.94699 18.4217 2.96756 17.9016 3.09934 17.4043C3.23113 16.9071 3.47089 16.4451 3.80156 16.051C4.13224 15.657 4.5457 15.3407 5.01252 15.1247C5.47935 14.9086 5.98805 14.7981 6.50243 14.8011C7.01682 14.804 7.52423 14.9203 7.98856 15.1416V9.80411C7.98856 9.53889 8.09392 9.28454 8.28146 9.097C8.46899 8.90946 8.72335 8.80411 8.98856 8.80411H14.8261C14.5644 8.25549 14.4522 7.64748 14.5011 7.04161C14.5388 6.5286 14.6891 6.0302 14.9413 5.58189C15.1935 5.13359 15.5415 4.74638 15.9604 4.44785C16.3792 4.14931 16.8588 3.94677 17.3649 3.85465C17.8709 3.76254 18.3911 3.7831 18.8883 3.91488C19.3856 4.04667 19.8476 4.28643 20.2416 4.6171C20.6357 4.94778 20.9519 5.36124 21.168 5.82806C21.384 6.29489 21.4945 6.80359 21.4916 7.31797C21.4887 7.83236 21.3724 8.33977 21.1511 8.80411H26.9886C27.2538 8.80411 27.5081 8.90946 27.6957 9.097C27.8832 9.28454 27.9886 9.53889 27.9886 9.80411V15.1416C27.44 14.8799 26.8319 14.7678 26.2261 14.8166C25.7131 14.8543 25.2147 15.0046 24.7664 15.2568C24.318 15.5091 23.9308 15.857 23.6323 16.2759C23.3338 16.6948 23.1312 17.1743 23.0391 17.6804C22.947 18.1865 22.9676 18.7066 23.0993 19.2039C23.2311 19.7011 23.4709 20.1632 23.8016 20.5572C24.1322 20.9512 24.5457 21.2675 25.0125 21.4835C25.4793 21.6996 25.9881 21.8101 26.5024 21.8071C27.0168 21.8042 27.5242 21.6879 27.9886 21.4666V26.8041C27.9886 27.0693 27.8832 27.3237 27.6957 27.5112C27.5081 27.6987 27.2538 27.8041 26.9886 27.8041H8.98856Z"
        fill="white"
      ></path>
      <path
        d="M8.98856 27.8041C8.72335 27.8041 8.46899 27.6987 8.28146 27.5112C8.09392 27.3237 7.98856 27.0693 7.98856 26.8041V21.4666C7.43995 21.7283 6.83194 21.8404 6.22607 21.7916C5.71306 21.7539 5.21466 21.6036 4.76635 21.3514C4.31805 21.0992 3.93084 20.7512 3.6323 20.3323C3.33377 19.9134 3.13123 19.4339 3.03911 18.9278C2.94699 18.4217 2.96756 17.9016 3.09934 17.4043C3.23113 16.9071 3.47089 16.4451 3.80156 16.051C4.13224 15.657 4.5457 15.3407 5.01252 15.1247C5.47935 14.9086 5.98805 14.7981 6.50243 14.8011C7.01682 14.804 7.52423 14.9203 7.98856 15.1416V9.80411C7.98856 9.53889 8.09392 9.28454 8.28146 9.097C8.46899 8.90946 8.72335 8.80411 8.98856 8.80411H14.8261C14.5644 8.25549 14.4522 7.64748 14.5011 7.04161C14.5388 6.5286 14.6891 6.0302 14.9413 5.58189C15.1935 5.13359 15.5415 4.74638 15.9604 4.44785C16.3792 4.14931 16.8588 3.94677 17.3649 3.85465C17.8709 3.76254 18.3911 3.7831 18.8883 3.91488C19.3856 4.04667 19.8476 4.28643 20.2416 4.6171C20.6357 4.94778 20.9519 5.36124 21.168 5.82806C21.384 6.29489 21.4945 6.80359 21.4916 7.31797C21.4887 7.83236 21.3724 8.33977 21.1511 8.80411H26.9886C27.2538 8.80411 27.5081 8.90946 27.6957 9.097C27.8832 9.28454 27.9886 9.53889 27.9886 9.80411V15.1416C27.44 14.8799 26.8319 14.7678 26.2261 14.8166C25.7131 14.8543 25.2147 15.0046 24.7664 15.2568C24.318 15.5091 23.9308 15.857 23.6323 16.2759C23.3338 16.6948 23.1312 17.1743 23.0391 17.6804C22.947 18.1865 22.9676 18.7066 23.0993 19.2039C23.2311 19.7011 23.4709 20.1632 23.8016 20.5572C24.1322 20.9512 24.5457 21.2675 25.0125 21.4835C25.4793 21.6996 25.9881 21.8101 26.5024 21.8071C27.0168 21.8042 27.5242 21.6879 27.9886 21.4666V26.8041C27.9886 27.0693 27.8832 27.3237 27.6957 27.5112C27.5081 27.6987 27.2538 27.8041 26.9886 27.8041H8.98856Z"
        stroke="white"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
      ></path>
    </svg>

    <Fragment slot="subline">Preprocessing</Fragment>

    <Fragment slot="headline">Don't wrap, <i>render</i>.</Fragment>

    <Fragment slot="body-left">
      At Threlte's core, one single component does the heavy lifting:
      <code>{'<'}Three{'>'}</code>. It's responsible for managing the scene graph, updating props
      and handling events of arbitrary <code>THREE</code> objects. To simplify and speed up development,
      Threlte ships with a <span class="text-highlight">Svelte preprocessor</span> that automatically
      generates <code>{'<'}Three{'>'}</code> component instances from its sibling:
      <code>{'<'}T{'>'}</code>.<br /><br />

      This enables you to import a single <code>{'<'}T{'>'}</code> component to render any
      <code>THREE</code> object, all while keeping your code clean, readable and type-safe.<br /><br
      />

      It's of course perfectly possible to use Threlte without preprocessing!
      <Button
        class="mt-8"
        href=""
        color="blue"
      >
        Learn More
      </Button>
    </Fragment>

    <Fragment slot="body-right">
      <div class="flex flex-col gap-6">
        <div>
          <Code
            code={PreprocessBeforeExampleRaw}
            lang="svelte"
            title="Your Code"
          />
        </div>
        <div
          class="flex flex-row gap-2 items-center justify-center text-white [&>svg]:w-10 text-base"
        >
          <svg
            viewBox="0 0 33 33"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              opacity="0.2"
              d="M16.9886 28.8041C23.616 28.8041 28.9886 23.4315 28.9886 16.8041C28.9886 10.1767 23.616 4.80411 16.9886 4.80411C10.3611 4.80411 4.98856 10.1767 4.98856 16.8041C4.98856 23.4315 10.3611 28.8041 16.9886 28.8041Z"
              fill="white"
            ></path>
            <path
              d="M16.9886 28.8041C23.616 28.8041 28.9886 23.4315 28.9886 16.8041C28.9886 10.1767 23.616 4.80411 16.9886 4.80411C10.3611 4.80411 4.98856 10.1767 4.98856 16.8041C4.98856 23.4315 10.3611 28.8041 16.9886 28.8041Z"
              stroke="white"
              stroke-width="2"
              stroke-miterlimit="10"
            ></path>
            <path
              d="M12.7511 17.5666L16.9886 21.8041L21.2261 17.5666"
              stroke="white"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            ></path>
            <path
              d="M16.9886 11.8041V21.8041"
              stroke="white"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            ></path>
          </svg>
          <p class="text-faded">@threlte/preprocess</p>
        </div>
        <div>
          <Code
            code={PreprocessAfterExampleRaw}
            lang="svelte"
            title="Preprocessed Code"
          />
        </div>
      </div>
    </Fragment>
  </FeatureSection>

  <FeatureSection
    color="blue"
    class="border-t-0"
  >
    <Fragment slot="subline">Start your Journey</Fragment>

    <Fragment slot="headline">Don't take our word for it.</Fragment>

    <div
      slot="body"
      class="w-full flex flex-col items-center"
    >
      <div>
        <Testimonials class="w-full mb-12" />
      </div>

      <Button
        color="orange"
        href="/docs/learn/getting-started"
        class="glow-orange"
      >
        Getting Started
      </Button>
    </div>
  </FeatureSection>

  <div class="flex flex-col justify-center items-center my-12">
    <h2 class="text-5xl font-bold mb-8 text-glow-white text-center">Join the Threlte Community.</h2>

    <Button
      color="blue"
      href="#discord-link"
    >
      <svg
        slot="icon-before"
        class="w-10"
        xmlns="http://www.w3.org/2000/svg"
        viewBox="0 0 127.14 96.36"
      >
        <g data-name="图层 2">
          <g data-name="Discord Logos">
            <path
              d="M107.7 8.07A105.15 105.15 0 0 0 81.47 0a72.06 72.06 0 0 0-3.36 6.83 97.68 97.68 0 0 0-29.11 0A72.37 72.37 0 0 0 45.64 0a105.89 105.89 0 0 0-26.25 8.09C2.79 32.65-1.71 56.6.54 80.21a105.73 105.73 0 0 0 32.17 16.15 77.7 77.7 0 0 0 6.89-11.11 68.42 68.42 0 0 1-10.85-5.18c.91-.66 1.8-1.34 2.66-2a75.57 75.57 0 0 0 64.32 0c.87.71 1.76 1.39 2.66 2a68.68 68.68 0 0 1-10.87 5.19 77 77 0 0 0 6.89 11.1 105.25 105.25 0 0 0 32.19-16.14c2.64-27.38-4.51-51.11-18.9-72.15ZM42.45 65.69C36.18 65.69 31 60 31 53s5-12.74 11.43-12.74S54 46 53.89 53s-5.05 12.69-11.44 12.69Zm42.24 0C78.41 65.69 73.25 60 73.25 53s5-12.74 11.44-12.74S96.23 46 96.12 53s-5.04 12.69-11.43 12.69Z"
              fill="#fff"
              data-name="Discord Logo - Large - White"
            ></path>
          </g>
        </g>
      </svg>
      Discord
    </Button>
  </div>
</MainLayout>
